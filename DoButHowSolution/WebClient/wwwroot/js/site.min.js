window.viewModels&&$.each(window.viewModels,function(n,t){window[t.name]=new t.init;ko.applyBindings(window[t.name],$("#"+t.containerId)[0])});$(document).ready(function(){var n=$(window);n.scroll(function(){$(document).height()-n.height()===n.scrollTop()&&(setTimeout(()=>{$("#loading").show()},0),window.answerViewModel&&window.answerViewModel.LoadMore(function(){setTimeout(()=>{$("#loading").hide()},1e3)}),window.questionsViewModel&&window.questionsViewModel.LoadMore(function(){setTimeout(()=>{$("#loading").hide()},1e3)}))});window.esClient=$.es.Client({hosts:"http://127.0.0.1:9200/"});window.esClient.ping({requestTimeout:3e4},function(n){n?console.error("elasticsearch cluster is down!"):console.log("All is well")});window.esClient.search({index:"questions",type:"_doc",body:{query:{match_all:{}},size:20}}).then(function(n){var t=n.hits.hits;console.log(t)},function(n){console.trace(n.message)});$("#searchInput").autocomplete({appendTo:"#options-menu",autoFocus:!0,create:function(){},select:function(){},change:function(){},source:function(n,t){var u=n.term,i=u.split(" "),f=i[i.length-1],r;i.pop();r=i.join(" ");window.esClient.search({index:"questions",type:"_doc",body:{suggest:{"word-suggest":{prefix:f,completion:{field:"suggest",fuzzy:!0}}}}}).then(function(n){console.log(n.suggest["word-suggest"][0].options);var i=[],u={};$.each(n.suggest["word-suggest"][0].options,function(n,t){u[t.text]||(i.push(r+" "+t.text),u[t.text]={})});t(i)},function(n){console.trace(n.message)})},minLength:3})});ko.bindingHandlers.fadeVisible={init:function(n,t){var i=t()},update:function(n,t){var i=t();$(n).fadeIn(1500)}};